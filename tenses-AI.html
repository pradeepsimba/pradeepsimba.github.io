<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>English Tenses</title>
    <link rel="icon" href="12.png" type="image/png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        body {
            padding-top: 5rem; /* Adjust for fixed navbar height */
            background-color: var(--bs-body-bg);
            transition: background-color 0.3s ease;
            color: var(--bs-body-color);
        }
        .spinner-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 70vh;
        }
        .card {
            border: 1px solid var(--bs-border-color);
            border-radius: 0.75rem;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.08);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-0.25rem);
            box-shadow: 0 0.75rem 1.5rem rgba(0, 0, 0, 0.1);
        }
        .card-title {
            color: var(--bs-primary);
            margin-bottom: 1rem;
        }
        h2 {
            color: var(--bs-heading-color);
            margin-bottom: 1.5rem;
        }
        section {
            padding-top: 3rem;
            padding-bottom: 3rem;
            display: none; /* Initially hide all sections */
        }
        section.active {
            display: block; /* Show the active section */
        }
    </style>
</head>
<body>

<nav class="navbar fixed-top navbar-expand-lg bg-body-tertiary border-bottom shadow-sm">
    <div class="container-fluid">
        <a class="navbar-brand fw-semibold text-primary" href="#">
            <i class="bi bi-book-half me-2"></i> English Tenses
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#home">
                        <i class="bi bi-house-door-fill me-1"></i> Home
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#present-tenses-section">
                        <i class="bi bi-clock me-1"></i> Present Tenses
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#past-tenses-section">
                        <i class="bi bi-hourglass-split me-1"></i> Past Tenses
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#future-tenses-section">
                        <i class="bi bi-calendar-plus-fill me-1"></i> Future Tenses
                    </a>
                </li>
                <!-- <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="practiceDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-pencil-square me-1"></i> Practice
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="practiceDropdown">
                        <li><a class="dropdown-item" href="#">Quiz Yourself</a></li>
                        <li><a class="dropdown-item" href="#">Fill in the Blanks</a></li>
                        <li><a class="dropdown-item" href="#">Sentence Transformation</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#">All Tenses Practice</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#about-section">
                        <i class="bi bi-info-circle-fill me-1"></i> About
                    </a>
                </li> -->
            </ul>
            <div class="form-check form-switch ms-lg-auto">
                <input class="form-check-input" type="checkbox" role="switch" id="themeToggle" />
                <label class="form-check-label" for="themeToggle">
                    <i class="bi bi-sun-fill text-warning me-1"></i><span class="theme-text">Light</span> / <i class="bi bi-moon-stars-fill text-secondary ms-1"></i><span class="theme-text">Dark</span>
                </label>
            </div>
        </div>
    </div>
</nav>

<section id="spinner" class="spinner-wrapper">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</section>

<main class="container py-5">
    <section id="home" class="active">
        <h2>Welcome to English Tenses!</h2>
        <p>Give me sentences in Tamil to translate into English.</p>
    </section>

    <section id="present-tenses-section">
        <h2>Present Tenses</h2>
        <div class="row gy-4" id="present-tenses-container">
            </div>
    </section>

    <section id="past-tenses-section">
        <h2>Past Tenses</h2>
        <div class="row gy-4" id="past-tenses-container">
            </div>
    </section>

    <section id="future-tenses-section">
        <h2>Future Tenses</h2>
        <div class="row gy-4" id="future-tenses-container">
            </div>
    </section>

    <section id="about-section">
        <h2>About This App</h2>
        <p>This application is designed to help you learn and understand English tenses. It provides clear explanations, formulas, and examples for each tense. The goal is to make learning grammar intuitive and accessible.</p>
        <p>Feel free to explore the different tenses and come back for practice exercises (coming soon!).</p>
    </section>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<script>
    AOS.init({ duration: 600, once: true, easing: 'ease-in-out' });

    const themeToggle = document.getElementById("themeToggle");
    const root = document.documentElement;
    const themeTextElements = document.querySelectorAll(".theme-text");
    const savedTheme = localStorage.getItem("preferredTheme") || "light";
    applyTheme(savedTheme);

    themeToggle.addEventListener("change", () => {
        const newTheme = themeToggle.checked ? "dark" : "light";
        applyTheme(newTheme);
    });

    function applyTheme(theme) {
        root.setAttribute("data-bs-theme", theme);
        localStorage.setItem("preferredTheme", theme);
        themeToggle.checked = theme === "dark";
        themeTextElements.forEach(el => {
            el.textContent = theme.charAt(0).toUpperCase() + theme.slice(1);
        });
    }

    const presentContainer = document.getElementById("present-tenses-container");
    const pastContainer = document.getElementById("past-tenses-container");
    const futureContainer = document.getElementById("future-tenses-container");
    const spinnerSection = document.getElementById("spinner");
    const mainContent = document.querySelector("main");
    const allSections = mainContent.querySelectorAll("section");
    const navLinks = document.querySelectorAll(".navbar-nav .nav-link");

    // Function to hide all sections
    function hideAllSections() {
        allSections.forEach(section => {
            section.classList.remove("active");
        });
        navLinks.forEach(link => {
            link.classList.remove("active");
            link.removeAttribute("aria-current");
        });
    }

    // Function to show a specific section
    function showSection(id) {
        const sectionToShow = document.getElementById(id);
        const correspondingNavLink = document.querySelector(`.navbar-nav .nav-link[href="#${id}"]`);

        if (sectionToShow) {
            hideAllSections();
            sectionToShow.classList.add("active");
            if (correspondingNavLink) {
                correspondingNavLink.classList.add("active");
                correspondingNavLink.setAttribute("aria-current", "page");
            }
        }
    }

    // Event listeners for navigation links
    navLinks.forEach(link => {
        link.addEventListener("click", function(e) {
            e.preventDefault();
            const targetId = this.getAttribute("href").substring(1); // Remove the '#'
            showSection(targetId);
        });
    });

    // Show the Home section initially
    showSection("home");

    fetch("https://raw.githubusercontent.com/pradeepsimba/files/refs/heads/main/egdata/tenses.json")
    .then(res => res.json())
    .then(data => {
        spinnerSection?.remove();

        data.tenses.forEach((tense) => {
            const col = document.createElement("div");
            col.className = "col-12 col-md-6 col-lg-4";
            col.setAttribute("data-aos", "fade-up");

            const idBase = tense.name.toLowerCase().replace(/\s+/g, "-");

            const navTabs = document.createElement("ul");
            navTabs.className = "nav nav-tabs mb-3";
            navTabs.id = `${idBase}-tabs`;
            navTabs.setAttribute("role", "tablist");

            const tabContent = document.createElement("div");
            tabContent.className = "tab-content";
            tabContent.id = `${idBase}-tab-content`;

            tense.types.forEach((type, index) => {
                const typeId = `${idBase}-${type.sentenceType.toLowerCase().replace(/\s+/g, "-")}`;

                // Tab nav button
                const navItem = document.createElement("li");
                navItem.className = "nav-item";
                navItem.setAttribute("role", "presentation");

                const button = document.createElement("button");
                button.className = `nav-link${index === 0 ? " active" : ""}`;
                button.id = `${typeId}-tab`;
                button.setAttribute("data-bs-toggle", "tab");
                button.setAttribute("data-bs-target", `#${typeId}`);
                button.setAttribute("type", "button");
                button.setAttribute("role", "tab");
                button.setAttribute("aria-controls", typeId);
                button.setAttribute("aria-selected", index === 0 ? "true" : "false");
                button.textContent = type.sentenceType;

                navItem.appendChild(button);
                navTabs.appendChild(navItem);

                // Tab content pane
                const tabPane = document.createElement("div");
                tabPane.className = `tab-pane fade${index === 0 ? " show active" : ""}`;
                tabPane.id = typeId;
                tabPane.setAttribute("role", "tabpanel");
                tabPane.setAttribute("aria-labelledby", `${typeId}-tab`);

                // Formula
                const formulaP = document.createElement("p");
                formulaP.className = "mb-1";
                formulaP.innerHTML = `<span class="fw-bold">Formula:</span> <code class="text-primary">${type.formula}</code>`;

                // Example
                const exampleP = document.createElement("p");
                exampleP.className = "mb-2";
                exampleP.innerHTML = `<span class="fw-bold">Example:</span> <span class="text-success fst-italic">${type.example}</span>`;

                // Practice (string or array joined into string)
                const practiceText = Array.isArray(type.practice_with)
                    ? type.practice_with.join(", ")
                    : type.practice_with;

                const practiceP = document.createElement("p");
                practiceP.className = "mb-2";
                practiceP.innerHTML = `<span class="fw-bold">Practice:</span> <span class="text-success fst-italic">${practiceText}</span>`;

                tabPane.appendChild(formulaP);
                tabPane.appendChild(exampleP);
                tabPane.appendChild(practiceP);

                tabContent.appendChild(tabPane);
            });

            const card = document.createElement("div");
            card.className = "card h-100";

            const cardBody = document.createElement("div");
            cardBody.className = "card-body";

            const cardTitle = document.createElement("h5");
            cardTitle.className = "card-title fw-semibold";
            cardTitle.textContent = tense.name;

            cardBody.appendChild(cardTitle);
            cardBody.appendChild(navTabs);
            cardBody.appendChild(tabContent);
            card.appendChild(cardBody);
            col.appendChild(card);

            // Append to appropriate section
            if (tense.name.toLowerCase().includes("present")) {
                presentContainer.appendChild(col);
            } else if (tense.name.toLowerCase().includes("past")) {
                pastContainer.appendChild(col);
            } else if (tense.name.toLowerCase().includes("future")) {
                futureContainer.appendChild(col);
            }
        });

        // Initialize Bootstrap tabs
        const tabElms = document.querySelectorAll('.nav-tabs .nav-link');
        tabElms.forEach(tabEl => {
            new bootstrap.Tab(tabEl);
        });
    })
    .catch(err => {
        console.error("Failed to load tenses:", err);
        if (spinnerSection) {
            spinnerSection.innerHTML = `<div class="alert alert-danger" role="alert">Failed to load data. Please try again later. Error: ${err.message}</div>`;
        }
    });


</script>

</body>
</html>
